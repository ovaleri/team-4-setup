<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>4BitCoderz - Base</title>
        <link rel="stylesheet" href="format.css">
    </head>
    <body>
        <header style="height: 20px; display: flex; justify-content: space-between; align-items: center;">
            <!--Company Logo AKA our group name-->
            <div class="logo" style="color: #000000; text-align: left; padding: 10px;">
                4BitCoderz
            </div>
            <div class="navbar" style="color: black; align-items: center; text-align: center; justify-content: center;">
                    <div style="border-right: 1px solid grey; display: flex; height: 90%;">
                    <a href="./sign-up">Sign Up</a>
                    </div>
                    <a href="./ProjectServices.asmx.cs">Login</a>
            </div>
        </header>
        <div class="img_wrapper">
            <div class="img_overlay">
            </div>
        </div>
        <!-- Navbar to allow user navigation to different pages -->
        <nav style="border-top: solid black 2px;">
            <ul>
                <a href='./home.html'>Home</a>
                <p style="display: inline;"> | </p>
                <a href="./findfood.html">Find What You Want</a>
                <p style="display: inline;"> | </p>
                <a href="./search.html">Search Recipes</a>
            </ul>
        </nav>


        <!--Individual Page Body Content Gets Inserted Here-->
        <div class="search-wrapper" style="background-color: #ededed;">
            <h1 style="color: rgb(47, 47, 47);">Search our recipes!</h1>
            <form class="custom-form" action="" method="POST">
                <input class="custom-input-field" placeholder="Dish name" name="search" id="search">
                <button class="share-button">Submit</button>
            </form>
            <div style="display: flexbox; width: 99%; background-color: #dadada; height: 5px; border-radius: 15px;"></div>
        </div>
        
        <h2 id="results"></h2>

        <footer style="text-align: center; display: flex; align-self: flex-end; justify-content: center;">
            <!--Company Copyright and etc-->
            <h6>
                1151 S Forest Ave, Tempe, AZ 85281, USA<br>
                &copy; 2025 4BitCoderz. All rights reserved.
            </h6>
        </footer>
    </body>

    <!-- js can get inserted here-->
    <script>
        let userSearch = "";
        
        document.querySelectorAll('.share-button').forEach(button => {
            button.addEventListener('click', function () {
                // Save button value on click
                const SearchID = document.getElementById('search');
                const SearchValue = SearchID.value;
                userSearch = SearchValue;
                console.log(userSearch);
                SearchID.value = '';
                event.preventDefault();});
            });

        function callSearch() {

            // Perform AJAX request to call the WebMethod
            $.ajax({
                type: "POST",  // Use POST to send data to the server
                url: "ProjectServices.asmx/NameSearchResults",  // URL of the WebMethod
                data: JSON.stringify({ recipeName: userSearch}),  // Send the search as JSON
                contentType: "application/json; charset=utf-8",  // Content type of the request
                dataType: "JSON",  // Expect JSON response
                success: function (response) {
                    console.log(response);  // Log the response to see what comes back
                    alert("Search result: " + response.d);
                    document.getElementById('results').innerHTML = "Search result:<br><br>" + response.d;
                },
                error: function (xhr, status, error) {
                    // Error handling
                    alert("Error: " + error);
                }
            });
        }
    </script>
</html>